(this.webpackJsonpdungeongen=this.webpackJsonpdungeongen||[]).push([[0],{34:function(e,t,n){},36:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),i=n.n(c),s=n(24),o=n.n(s),l=(n(34),n(20)),u=n.n(l),j=n(25),d=n(2),h=(n.p,n(36),n(12)),v=n(8),f=n.n(v),b=(n(38),n(9)),p=n(13),x=n(1),O=function(e,t,n,a){return e>n||t>a.length/n||e<0||t<0?-1:a[e+t*n]},g=p.a.span(a||(a=Object(h.a)(["\n    width: ","vmin;\n    height: ","vmin;\n    \n"])),(function(e){return 95/e.width}),(function(e){return 95/e.width})),m=function(e){return Object(x.jsx)(g,{width:e.width,className:e.className,onClick:function(){!function(e,t,n,a,r,c,i,s){var o=O(e,t,n,a),l=a.map((function(e){return e})),u=function(e){var t=[];return 2&e&&t.push([0,1]),1&e&&t.push([0,-1]),8&e&&t.push([1,0]),4&e&&t.push([-1,0]),t}(o);u.push([0,0]);var j=O(e,t,n,i);if(console.log("tile "+j),s(j),16&o){var d,h=Object(b.a)(u);try{for(h.s();!(d=h.n()).done;)r(e+(p=d.value)[0],t+p[1],n,l,15&O(e+p[0],t+p[1],n,a))}catch(x){h.e(x)}finally{h.f()}}else{var v,f=Object(b.a)(u);try{for(f.s();!(v=f.n()).done;){var p;r(e+(p=v.value)[0],t+p[1],n,l,16|O(e+p[0],t+p[1],n,a))}}catch(x){f.e(x)}finally{f.f()}}c(l)}(e.x,e.y,e.width,e.doorMasks,e.setTile,e.setDoorMasks,e.tiles,e.onSelectRoom)},children:e.children})},w=function(e,t,n,a,r){a[e+t*n]=r},y=function(e,t,n,a,r){a[e+t*n]|=r},S=function(e,t,n,a,r,c,i,s){if(0===i?(e-=Math.floor(r/2),1===s&&(t-=c-1)):(t-=Math.floor(c/2),1===i&&(e-=r-1)),e+r>n-1)return!1;if(t+c>a.length/n-1)return!1;if(e<1||t<1)return!1;for(var o=0;o<r;o++)for(var l=0;l<c;l++)if(0!==T(e+o,t+l,n,a))return!1;return!0},M=function(e,t,n,a,r,c,i,s,o){0===s?(e-=Math.floor(c/2),1===o&&(t-=i-1)):(t-=Math.floor(i/2),1===s&&(e-=c-1));for(var l=0;l<c;l++)for(var u=0;u<i;u++)w(e+l,t+u,n,a,r)},T=function(e,t,n,a){return e>n||t>a.length/n||e<0||t<0?-1:a[e+t*n]},C=function(e,t,n,a,r){var c,i,s=function(e,t,n,a,r,c,i,s,o,l){};switch(e.intBetween(0,4)){default:c=e.intBetween(3,Math.floor(a/2)),i=e.intBetween(3,Math.floor(r/2)),s=function(e,t,n,a,r,c,i,s,o,l,u,j){M(e,t,s,o,i,n,a,r,c),y(e,t,s,u,B(r,c)),y(e+r,t+c,s,u,k(r,c));var d=Math.floor(n*r*.5-.5*r),h=Math.floor(a*c*.5-.5*c);return y(e-d,t-h,s,j,1),i+1};break;case 0:return N(e,t,n,a,r,a/2)}return[s,c,i]},N=function(e,t,n,a,r,c){var i,s,o;return i=e.intBetween(2,Math.floor(c)),s=e.intBetween(2,Math.floor(c)),0!==t?(s=3,o=function(e,t,n,a,r,c,i,s,o,l,u,j){return M(e,t,s,o,2,n,a-2,r,c),2!==T(e+r,t+c,s,o)&&(y(e,t,s,u,B(r,c)),y(e+r,t+c,s,u,k(r,c))),i}):(i=3,o=function(e,t,n,a,r,c,i,s,o,l,u,j){return M(e,t,s,o,2,n-2,a,r,c),2!==T(e+r,t+c,s,o)&&(y(e,t,s,u,B(r,c)),y(e+r,t+c,s,u,k(r,c))),i}),[o,i,s]},B=function(e,t){return-1===e?4:1===e?8:1===t?2:-1===t?1:void 0},k=function(e,t){return 1===e?4:-1===e?8:-1===t?2:1===t?1:void 0},D=function(e,t,n,a){for(var r=!1,c=0,i=0,s=0,o=0,l=0;!r&&c++<100;){var u=a.intBetween(1,t-2),j=a.intBetween(1,n-2);if(0===T(u,j,t,e)){var d=-1,h=0;i=u,s=j,(0!==T(u+d,j+h,t,e)||0!==T(u+(d=1),j+h,t,e)||0!==T(u+(d=0),j+(h=1),t,e)||0!==T(u+d,j+(h=-1),t,e))&&(r=!0,o=d,l=h)}}return[r,i,s,o,l]},L=function(e){var t=i.a.useState([]),n=Object(d.a)(t,2),a=n[0],c=n[1],s=i.a.useState(null),o=Object(d.a)(s,2),l=o[0],u=o[1],j=i.a.useState(null),v=Object(d.a)(j,2),b=v[0],O=v[1],g=i.a.useState(null),M=Object(d.a)(g,2),B=M[0],k=M[1],L=i.a.useState(null),E=Object(d.a)(L,2),R=E[0],P=E[1],A=i.a.useState(0),F=Object(d.a)(A,2),G=(F[0],F[1]);i.a.useEffect((function(){for(var t=f.a.create(e.seed),n=e.width,a=e.height,r=[],i=[],s=[],o=[],l=[],j=0;j<e.width;j++)for(var h=0;h<a;h++)r.push(t.range(0)),i.push(0),s.push(0),o.push(0),l.push(0);var v=3,b=t.intBetween(3,n/2),p=t.intBetween(3,a/2);!function(e,t,n,a,r,c,i){for(var s=0;s<c;s++)for(var o=0;o<i;o++)w(e+s,t+o,n,a,r)}(j=Math.floor(n/2)-Math.floor(b/2),h=Math.floor(a/2)-Math.floor(p/2),n,r,v++,b,p),y(j+Math.floor(b/2),h+Math.floor(p/2),n,l,1);for(var x=0;x<2;x++){var g=D(r,n,a,t),m=Object(d.a)(g,5),M=m[0],B=m[1],L=m[2],E=m[3],R=m[4];if(M){var A=N(t,E,R,n,a,n/2),F=Object(d.a)(A,3),G=F[0],q=F[1],I=F[2];S(B,L,n,r,q,I,E,R)&&(v=G(B,L,q,I,E,R,v,n,r,t,s))}}for(x=0;x<n*a*2;x++){var U=D(r,n,a,t),H=Object(d.a)(U,5);M=H[0],B=H[1],L=H[2],E=H[3],R=H[4];if(M){var J=C(t,E,R,n,a),X=Object(d.a)(J,3);G=X[0],q=X[1],I=X[2];S(B,L,n,r,q,I,E,R)&&(v=G(B,L,q,I,E,R,v,n,r,t,s,l))}}c(r),function(e,t,n,a){for(var r=1;r<n-1;r++)for(var c=1;c<a-1;c++){var i=0,s=T(r,c,n,e);T(r,c+1,n,e)!=s&&(i+=2),T(r,c-1,n,e)!=s&&(i+=1),T(r+1,c,n,e)!=s&&(i+=8),T(r-1,c,n,e)!=s&&(i+=4),w(r,c,n,t,i)}}(r,i,n,a),function(e,t,n){for(var a=Math.floor(t.length/e),r=1;r<e-1;r+=1)for(var c=1;c<a-1;c+=1)(r+c%2)%2||(n.range(2)?y(r,c,e,t,1):y(r,c-1,e,t,2),n.range(2)?y(r,c,e,t,2):y(r,c+1,e,t,1),n.range(2)?y(r,c,e,t,4):y(r-1,c,e,t,8),n.range(2)?y(r,c,e,t,8):y(r+1,c,e,t,4))}(n,o,t),k(o),u(i),O(s),P(l)}),[e.seed,e.width,e.height]);for(var q=i.a.useReducer((function(e){return e+1}),0),I=Object(d.a)(q,2),U=(I[0],I[1],Math.floor(a.length/e.width)),H=[],J=f.a.create(e.seed),X=function(e){G(e)},z=0;z<U;z++)for(var K=e.width,Q=0;Q<e.width;Q++){var V,W=T(Q,z,K,a),Y=T(Q,z,K,l);V=J.intBetween(0,3);var Z=T(Q,z,K,B),$=T(Q,z,K,b),_="tile"+V+" tilebase ";_+=" roomColor"+Math.min(W,3),1&Y&&(1&Z||!(z>1))||(_+=" tilenoborderT"),2&Y&&(2&Z||!(z<U-2))||(_+=" tilenoborderB"),4&Y&&(4&Z||!(Q>1))||(_+=" tilenoborderL"),8&Y&&(8&Z||!(Q<K-2))||(_+=" tilenoborderR"),1&$&&(_+=" tiledoorT",16&$&&(_+=" tilenoborderT")),2&$&&(_+=" tiledoorB",16&$&&(_+=" tilenoborderB")),4&$&&(_+=" tiledoorL",16&$&&(_+=" tilenoborderL")),8&$&&(_+=" tiledoorR",16&$&&(_+=" tilenoborderR"));var ee=[];if(1&T(Q,z,K,R)){ee.push(Object(x.jsx)("div",{className:"icon",roomID:W,children:W}))}H.push(Object(x.jsxs)(m,{width:e.width,className:_,x:Q,y:z,w:K,doorMasks:b,setDoorMasks:O,setTile:w,tiles:a,onSelectRoom:X,children:[ee," "]}))}var te=p.a.div(r||(r=Object(h.a)(["\n    grid-template-rows: repeat(",", 1fr);\n    grid-template-columns: repeat(",", 1fr);\n"])),(function(e){return e.width}),(function(e){return e.height}));return Object(x.jsx)("div",{children:Object(x.jsx)(te,{className:"tile-container",width:e.width,height:e.height,children:H})})},E=function(e){var t=[1,1,1.5,2,2,2,2,2.5,2.5,2.5,2.5,3,3,3,3,4,4,4,4,4,4],n=i.a.useState(0),a=Object(d.a)(n,2),r=a[0],c=a[1],s=i.a.useState([]),o=Object(d.a)(s,2),l=o[0],u=o[1];i.a.useEffect((function(){var n=[],a=0,r=!1;if(e.environment){var i=e.environment.get(e.environmentString),s=0,o=f.a.create(e.seed);for(console.log("recalc list"+e.seed);i&&!r&&s++<1e4;){var l=o(i.length),j=i[Math.floor(l)];if(!(j.xp>e.xpTargets[e.difficulty]-a*(e.adjust?t[n.length+1]:1))){for(n.push(j),a+=j.xp;a*(e.adjust?t[n.length]:1)>e.xpTargets[e.difficulty]||n.length>e.max;){e.adjust&&n.length,e.xpTargets[e.difficulty];for(var d=1e6,h=-1,v=0;v<n.length;v++){var b=n[v];b.xp<d&&(d=b.xp,h=v)}a-=n[h].xp,n.splice(h,1)}a*(e.adjust?t[n.length]:1)>.8*e.xpTargets[e.difficulty]&&(r=!0)}}c(a),u(n)}}),[e.seed]);var j=function(e){var t=l.map((function(e){return e}));c(r+l[e.target.id].xp),t.push(l[e.target.id]),u(t)},h=function(e){var t=l.map((function(e){return e}));c(r-l[e.target.id].xp),t.splice(e.target.id,1),u(t)},v=0,b=l.map((function(e){var t=Object(x.jsxs)("div",{className:"results",children:[e.name," (",e.xp,") ",Object(x.jsx)("button",{id:v,onClick:j,children:"+"})," ",Object(x.jsx)("button",{id:v,onClick:h,children:"-"})]},v);return v++,t})),p=[0,0,0,0];for(v=0;v<4;v++)p[v]=r*(e.adjust?t[l.length]:1);return Object(x.jsxs)("div",{children:["XP: ",r," * ",e.adjust?t[l.length]:1," = ",r*(e.adjust?t[l.length]:1)," / ",e.xpTargets[e.difficulty],b,Object(x.jsxs)("div",{children:["XP: ",r]}),Object(x.jsxs)("div",{className:"flex-container",children:[Object(x.jsxs)("div",{className:"column-container",children:[Object(x.jsx)("meter",{max:e.xpTargets[0],min:0,value:p[0]}),"Easy",Object(x.jsx)("br",{}),"(",e.xpTargets[0],")"]}),Object(x.jsxs)("div",{className:"column-container",children:[Object(x.jsx)("meter",{max:e.xpTargets[1],min:e.xpTargets[0],value:p[1]}),"Normal",Object(x.jsx)("br",{}),"(",e.xpTargets[1],")"]}),Object(x.jsxs)("div",{className:"column-container",children:[Object(x.jsx)("meter",{max:e.xpTargets[2],min:e.xpTargets[1],value:p[2]}),"Hard",Object(x.jsx)("br",{}),"(",e.xpTargets[2],")"]}),Object(x.jsxs)("div",{className:"column-container",children:[Object(x.jsx)("meter",{max:e.xpTargets[3],min:e.xpTargets[2],value:p[3]}),"Deadly",Object(x.jsx)("br",{}),"(",e.xpTargets[3],")"]})]})]})},R=function(e){var t=[[0,0,0,0],[25,50,75,100],[50,100,150,200],[75,150,225,400],[125,250,375,500],[250,500,750,1100],[300,600,900,1400],[350,750,1100,1700],[450,900,1400,2100],[550,1100,1600,2400],[600,1200,1900,2800],[800,1600,2400,3600],[1e3,2e3,3e3,4500],[1100,2200,3400,5100],[1250,2500,3800,5700],[1400,2800,4300,6400],[1600,3200,4800,7200],[2e3,3900,5900,8800],[2100,4200,6300,9500],[2400,4900,7300,10900],[2800,5700,8500,12700]],n=i.a.useState(e.compensate),a=Object(d.a)(n,2),r=a[0],s=a[1],o=i.a.useState(e.seed),l=Object(d.a)(o,2),u=l[0],j=l[1],h=i.a.useState(e.players),v=Object(d.a)(h,2),f=v[0],b=v[1],p=i.a.useState(e.playerLevel),O=Object(d.a)(p,2),g=O[0],m=O[1],w=i.a.useState([1,1,1,1]),y=Object(d.a)(w,2),S=y[0],M=y[1],T=i.a.useState(e.environmentString),C=Object(d.a)(T,2),N=C[0],B=C[1],k=i.a.useState(10),D=Object(d.a)(k,2),L=D[0],R=D[1],P=i.a.useState(1),A=Object(d.a)(P,2),F=A[0],G=A[1];i.a.useEffect((function(){s(e.compensate),j(e.seed),b(e.players),m(e.playerLevel),B(e.environmentString)}),[e.compensate,e.seed,e.players,e.playerLevel,e.charLevels,e.environmentString,e.maxMonsters,e.difficulty]);var q=e.environment;Object(c.useEffect)((function(){!function(){for(var e=[],t=0;t<f;t++)e.push(g);M(e)}()}),[f,g]);for(var I=[0,0,0,0],U=0;U<S.length;U++)for(var H=0;H<4;H++)I[H]+=t[S[U]][H];return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["Players: ",Object(x.jsx)("input",{type:"number",min:"1",max:"20",value:f,onChange:function(e){b(e.target.value)}}),"x Level ",Object(x.jsx)("input",{type:"number",min:"1",max:"20",value:g,onChange:function(e){m(e.target.value)}})]}),Object(x.jsxs)("div",{children:["Max Monsters: ",Object(x.jsx)("input",{type:"number",min:"1",max:"30",value:L,onChange:function(e){R(e.target.value)}})]}),Object(x.jsxs)("div",{children:["Difficulty",Object(x.jsxs)("select",{onChange:function(e){G(e.target.value),localStorage.setItem("difficulty",F)},value:F,children:[Object(x.jsx)("option",{value:"0",children:"Easy"}),Object(x.jsx)("option",{value:"1",children:"Normal"}),Object(x.jsx)("option",{value:"2",children:"Hard"}),Object(x.jsx)("option",{value:"3",children:"Deadly"})]})]}),Object(x.jsxs)("div",{children:["Environment",Object(x.jsxs)("select",{onChange:function(e){B(e.target.value)},value:N,children:[Object(x.jsx)("option",{value:"forest",children:"Forest"}),Object(x.jsx)("option",{value:"underground",children:"Underground"}),Object(x.jsx)("option",{value:"swamp",children:"Swamp"}),Object(x.jsx)("option",{value:"desert",children:"Desert"}),Object(x.jsx)("option",{value:"cave",children:"Cave"}),Object(x.jsx)("option",{value:"dungeon",children:"Dungeon"}),Object(x.jsx)("option",{value:"planar",children:"Planar"}),Object(x.jsx)("option",{value:"grassland",children:"Grassland"}),Object(x.jsx)("option",{value:"mountain",children:"Mountain"}),Object(x.jsx)("option",{value:"ruins",children:"Ruins"}),Object(x.jsx)("option",{value:"aquatic",children:"Aquatic"}),Object(x.jsx)("option",{value:"urban",children:"Urban"}),Object(x.jsx)("option",{value:"arctic",children:"Arctic"}),Object(x.jsx)("option",{value:"coast",children:"Coast"})]})]}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){j(Math.floor(1e5*Math.random()))},children:"Generate"})})]}),Object(x.jsx)("div",{children:Object(x.jsx)(E,{environmentString:N,environment:q,max:L,difficulty:F,xpTargets:I,adjust:r,seed:u})})]})},P=n(29),A=n.n(P),F=n(3),G=n(14);var q=function(){var e=new Map;e.set("0",10),e.set("1/8",25),e.set("1/4",50),e.set("1/2",100),e.set("1",200),e.set("2",450),e.set("3",700),e.set("4",1100),e.set("5",1800),e.set("6",2300),e.set("7",2900),e.set("8",3900),e.set("9",5e3),e.set("10",5900),e.set("11",7200),e.set("12",8400),e.set("13",1e4),e.set("14",11500),e.set("15",13e3),e.set("16",15e3),e.set("17",18e3),e.set("18",2e4),e.set("19",22e3),e.set("20",25e3),e.set("21",33e3),e.set("22",41e3),e.set("23",5e4),e.set("24",62e3),e.set("30",155e3);var t=i.a.useState(new Map),n=Object(d.a)(t,2),a=n[0],r=n[1];i.a.useEffect((function(){function t(){return(t=Object(j.a)(u.a.mark((function t(){var n,a,c,i,s,o,l,j;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/kfc.tsv");case 2:return n=t.sent,a=n.body.getReader(),t.next=6,a.read();case 6:c=t.sent,i=new TextDecoder("utf-8"),s=i.decode(c.value),o=A.a.parse(s,{header:!0}),l=o.data,j=new Map,l.map((function(t){t.environment&&t.environment.split(",").map((function(n){if(n=n.replace(/\s/g,""),!j.has(n)){var a=new Array;j.set(n,a)}t.xp=e.get(t.cr),n&&j.get(n).push(t)}))})),r(j),console.log("done reading tsv");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var c=i.a.useState(10),s=Object(d.a)(c,2),o=(s[0],s[1],i.a.useState(1)),l=Object(d.a)(o,2),h=(l[0],l[1],i.a.useState(!0)),v=Object(d.a)(h,2),f=v[0],b=(v[1],i.a.useState(111)),p=Object(d.a)(b,2),O=p[0],g=p[1],m=i.a.useState(4),w=Object(d.a)(m,2),y=w[0],S=w[1],M=i.a.useState(1),T=Object(d.a)(M,2),C=T[0],N=T[1],B=i.a.useState([1,1,1,1]),k=Object(d.a)(B,2),D=(k[0],k[1],i.a.useState("forest")),E=Object(d.a)(D,2),P=E[0],q=E[1];return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{className:"App-header"}),Object(x.jsxs)(F.c,{children:[Object(x.jsx)(F.a,{path:"/",element:Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:["Players: ",Object(x.jsx)("input",{type:"number",min:"1",max:"20",value:y,onChange:function(e){S(e.target.value)}}),"x Level ",Object(x.jsx)("input",{type:"number",min:"1",max:"20",value:C,onChange:function(e){N(e.target.value)}})]}),Object(x.jsxs)("div",{children:["Environment",Object(x.jsxs)("select",{onChange:function(e){q(e.target.value)},children:[Object(x.jsx)("option",{value:"forest",children:"Forest"}),Object(x.jsx)("option",{value:"underground",children:"Underground"}),Object(x.jsx)("option",{value:"swamp",children:"Swamp"}),Object(x.jsx)("option",{value:"desert",children:"Desert"}),Object(x.jsx)("option",{value:"cave",children:"Cave"}),Object(x.jsx)("option",{value:"dungeon",children:"Dungeon"}),Object(x.jsx)("option",{value:"planar",children:"Planar"}),Object(x.jsx)("option",{value:"grassland",children:"Grassland"}),Object(x.jsx)("option",{value:"mountain",children:"Mountain"}),Object(x.jsx)("option",{value:"ruins",children:"Ruins"}),Object(x.jsx)("option",{value:"aquatic",children:"Aquatic"}),Object(x.jsx)("option",{value:"urban",children:"Urban"}),Object(x.jsx)("option",{value:"arctic",children:"Arctic"}),Object(x.jsx)("option",{value:"coast",children:"Coast"})]})]}),Object(x.jsx)("div",{children:Object(x.jsx)(G.b,{to:"/dungeon",children:Object(x.jsx)("button",{onClick:function(){g(Math.floor(1e5*Math.random()))},children:"Generate"})})})]})}),Object(x.jsx)(F.a,{path:"/dungeon",element:Object(x.jsx)(L,{width:20,height:20,seed:220})}),Object(x.jsx)(F.a,{path:"/monster",element:Object(x.jsx)("div",{children:Object(x.jsx)(R,{environment:a,environmentString:P,compensate:f,seed:O,players:y,playerLevel:C})})})]})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(G.a,{basename:"/DungeonGenerator",children:Object(x.jsx)(q,{})})}),document.getElementById("root")),I()}},[[60,1,2]]]);
//# sourceMappingURL=main.9aff1b37.chunk.js.map